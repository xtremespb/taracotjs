function submitOnEnter(a){var b;if(window.event)b=window.event.keyCode;else{if(!a)return!1;b=a.keyCode?a.keyCode:a.which}return 13==b&&(!window.previousKeyCode||33!=window.previousKeyCode&&34!=window.previousKeyCode&&39!=window.previousKeyCode&&40!=window.previousKeyCode)?!0:(window.previousKeyCode=b,!1)}function evalPassword(a){var b=a.replace(/(^\s+|\s+$)/g,"");if("undefined"==typeof b||null===b||!b||b.length<8)return 0;var c=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}])/;return c.test(b)?4:(c=/(?=.*\d)(?=.*[A-Z])(?=.*[a-z])/,c.test(b)?3:(c=/(?=.*\d)(?=.*[a-z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}])/,c.test(b)?3:(c=/(?=.*\d)(?=.*[A-Z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}])/,c.test(b)?3:(c=/(?=.*[a-z])(?=.*[A-Z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}])/,c.test(b)?3:(c=/(?=.*[a-z])(?=.*[A-Z])/,c.test(b)?2:(c=/(?=.*[a-z])(?=.*\d)/,c.test(b)?2:(c=/(?=.*[A-Z])(?=.*\d)/,c.test(b)?2:(c=/(?=.*[a-z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''""()\[\]{}])/,c.test(b)?2:(c=/(?=.*[A-Z])(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''""()\[\]{}])/,c.test(b)?2:(c=/(?=.*\d)(?=.*[\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}])/,c.test(b)?2:(c=/(?=.*[a-zA-Z0-9\^\\\/*+.,:;@&=#$%_\-!?<>''`�""()\[\]{}\u0400-\u052f \u00a1-\u024f])/,c.test(b)?1:0)))))))))))}$("#btn_pwd").click(function(){return $("#taracot-pwd-error").hide(),$(".taracot-auth-field").removeClass("uk-form-danger"),$("#pwd_password").val().match(/^.{8,80}$/)&&$("#pwd_password").val()==$("#pwd_password_repeat").val()?($("#set_password_div").hide(),$("#reset_res").hide(),$("#pwd_loading").show(),$("#taracot-pwd-error").hide(),void $.ajax({type:"POST",url:"/auth/password/process",data:{user:user,code:code,password:$("#pwd_password").val()},dataType:"json",success:function(a){1!=a.result?($("#set_password_div").show(),$("#reset_res").show(),$("#pwd_loading").hide(),a.field&&($("#"+a.field).addClass("uk-form-danger"),$("#"+a.field).select(),$("#"+a.field).focus()),a.error&&($("#taracot-pwd-error").html(a.error),$("#taracot-pwd-error").show())):($("#pwd_loading").hide(),$("#pwd_success").show())},error:function(){$("#set_password_div").show(),$("#pwd_loading").hide(),$("#reset_res").show(),$("#taracot-pwd-error").html(_lang_vars.ajax_failed),$("#taracot-pwd-error").show()}})):($("#pwd_password").addClass("uk-form-danger"),$("#pwd_password").focus(),$("#taracot-pwd-error").html(_lang_vars.invalid_password_syntax),void $("#taracot-pwd-error").show())});var pwd_password_event_input=function(){var a=evalPassword($("#pwd_password").val()),b=20*(a+1);$("#pwd_password_strength").css("width",b+"%"),$("#pwd_password_strength").html(_lang_vars["password_strength_"+a]),$("#pwd_password_strength").parent().removeClass("uk-progress-success"),$("#pwd_password_strength").parent().removeClass("uk-progress-warning"),$("#pwd_password_strength").parent().removeClass("uk-progress-danger"),1>=a&&$("#pwd_password_strength").parent().addClass("uk-progress-danger"),(2==a||3==a)&&$("#pwd_password_strength").parent().addClass("uk-progress-warning"),4==a&&$("#pwd_password_strength").parent().addClass("uk-progress-success"),$("#pwd_password_match").css("color","#eee"),a>0&&$("#pwd_password").val()==$("#pwd_password_repeat").val()&&$("#pwd_password_match").css("color","#9fd256")},pwd_password_repeat_event_input=function(){var a=evalPassword($("#pwd_password").val());$("#pwd_password_match").css("color","#eee"),a>0&&$("#pwd_password").val()==$("#pwd_password_repeat").val()&&$("#pwd_password_match").css("color","#9fd256")};$("#pwd_password").on("input",pwd_password_event_input),$("#pwd_password_repeat").on("input",pwd_password_repeat_event_input),$("#btn_auth").click(function(){location.href="/auth?rnd="+Math.random().toString().replace(".","")}),$(".taracot-auth-field").bind("keypress",function(a){submitOnEnter(a)&&($("#btn_pwd").click(),a.preventDefault())});