!function(a){function b(){document.getElementById("_taracot_loader_image").style.backgroundImage="url("+l+")",document.getElementById("_taracot_loader_image").style.width=h+"px",document.getElementById("_taracot_loader_image").style.height=i+"px",FPS=Math.round(100/g),q=1/FPS,p=setTimeout(c,q/1e3)}function c(){o+=k,n+=1,n>=j&&(o=0,n=0),document.getElementById("_taracot_loader_image")&&(document.getElementById("_taracot_loader_image").style.backgroundPosition=-o+"px 0"),p=setTimeout(c,1e3*q)}function d(a,b){clearTimeout(m),m=0,genImage=new Image,genImage.onload=function(){m=setTimeout(b,0)},genImage.src=a}var e,f=jQuery.extend({},f),g=9,h=100,i=100,j=12,k=100,l="/images/loading.png",m=!1,n=0,o=0,p=!1,q=0,r={init:function(){a("body").append('<div id="_taracot-loading-modal" class="uk-modal"><div class="uk-modal-dialog uk-modal-dialog-frameless" style="background:0;box-shadow:0 0 0px rgba(0,0,0,0);position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;"><div id="_taracot_loader_image"></div></div></div>'),e=a.UIkit.modal("#_taracot-loading-modal",{bgclose:!1,keyboard:!1}),new d(l,b)},show:function(){e.show()},hide:function(){e.hide()}};a.loadingIndicator=function(b){return r[b]?r[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" doesn't exists"):r.init.apply(this,arguments)}}(jQuery);var captcha_loading=!1;$.loadingIndicator();var load_captcha=function(){return"undefined"!=typeof captcha_type&&"png"==captcha_type?void $("#auth_captcha_img").attr("src","/auth/captcha?rnd="+Math.random().toString().replace(".","")):void(captcha_loading||(captcha_loading=!0,$.ajax({type:"POST",url:"/auth/captcha",data:{},dataType:"json",success:function(a){captcha_loading=!1,a.img?$("#auth_captcha_img").attr("src","data:image/jpeg;base64,"+a.img):$.UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"})},error:function(){$.UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"}),captcha_loading=!1}})))};$("#auth_captcha_img").click(load_captcha),$("#auth_login").click(function(){return $(".taracot-auth-field").removeClass("uk-form-danger"),$("#auth_username").val().match(/^[A-Za-z0-9_\-]{3,20}$/)?$("#auth_password").val().match(/^.{5,80}$/)?captcha_req&&!$("#auth_captcha").val().match(/^[0-9]{4}$/)?($("#auth_captcha").addClass("uk-form-danger"),$("#auth_captcha").focus(),void $.UIkit.notify({message:_lang_vars.invalid_captcha,status:"danger",timeout:2e3,pos:"top-center"})):($("#auth_login").addClass("uk-hidden"),$("#auth_progress").removeClass("uk-hidden"),void $.ajax({type:"POST",url:"/auth/process",data:{username:$("#auth_username").val(),password:$("#auth_password").val(),captcha:$("#auth_captcha").val()},dataType:"json",success:function(a){$("#auth_login").removeClass("uk-hidden"),$("#auth_progress").addClass("uk-hidden"),1!=a.result?($("#auth_captcha").val(""),a.field&&($("#"+a.field).addClass("uk-form-danger"),$("#"+a.field).focus()),$("#captcha_div").show(),captcha_req=!0,a.error&&$.UIkit.notify({message:a.error,status:"danger",timeout:2e3,pos:"top-center"}),load_captcha()):($("#auth_login").removeClass("uk-hidden"),$("#auth_progress").addClass("uk-hidden"),$("#auth_captcha").val(""),$("#auth_box_wrap").addClass("uk-hidden"),$.loadingIndicator("show"),location.href=redirect_url+"?rnd="+Math.random().toString().replace(".",""))},error:function(){$.UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"}),load_captcha()}})):($("#auth_password").addClass("uk-form-danger"),$("#auth_password").focus(),void $.UIkit.notify({message:_lang_vars.invalid_password_syntax,status:"danger",timeout:2e3,pos:"top-center"})):($("#auth_username").addClass("uk-form-danger"),$("#auth_username").focus(),void $.UIkit.notify({message:_lang_vars.invalid_username_syntax,status:"danger",timeout:2e3,pos:"top-center"}))}),$(".taracot-auth-field").bind("keypress",function(a){submitOnEnter(a)&&(a.preventDefault(),$("#auth_login").click())}),$("#auth_username").focus(),$(document).ready(function(){load_captcha()});