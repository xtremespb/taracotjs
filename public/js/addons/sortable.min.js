/*! UIkit 2.7.1 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){var b;jQuery&&jQuery.UIkit&&(b=a(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return b||a(jQuery,jQuery.UIkit)})}(function(a,b){"use strict";function c(a,b){var c=a.parentNode;if(b.parentNode!=c)return!1;for(var d=a.previousSibling;d&&9!==d.nodeType;){if(d===b)return!0;d=d.previousSibling}return!1}function d(a,b){var c=b;if(c==a)return null;for(;c;){if(c.parentNode===a)return c;if(c=c.parentNode,!c||!c.ownerDocument||11===c.nodeType)break}return null}function e(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}var f,g="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,h=!g&&function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}();return b.component("sortable",{defaults:{warp:!1,animation:150,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragCustomClass:"",stop:function(){},start:function(){},change:function(){}},init:function(){function b(b){return function(c){var e=g&&c.touches&&c.touches[0]||{},f=e.target||c.target;if(g&&document.elementFromPoint&&(f=document.elementFromPoint(c.pageX-document.body.scrollLeft,c.pageY-document.body.scrollTop)),a(f).hasClass(l.options.childClass))b.apply(f,[c]);else if(f!==m){var h=d(m,f);h&&b.apply(h,[c])}}}function c(){h||(g?m.addEventListener("touchmove",v,!1):(m.addEventListener("mouseover",r,!1),m.addEventListener("mouseout",s,!1)),m.addEventListener(g?"touchend":"mouseup",t,!1),document.addEventListener(g?"touchend":"mouseup",u,!1),document.addEventListener("selectstart",e,!1))}function i(){h||(g?m.removeEventListener("touchmove",v,!1):(m.removeEventListener("mouseover",r,!1),m.removeEventListener("mouseout",s,!1)),m.removeEventListener(g?"touchend":"mouseup",t,!1),document.removeEventListener(g?"touchend":"mouseup",u,!1),document.removeEventListener("selectstart",e,!1))}var j,k,l=this,m=this.element[0],n=null,o=null;this.element.children().attr("draggable","true");var p=b(function(b){var d=a(b.target);k=!1,g&&(b.preventDefault(),d.is("a")&&d.attr("href")&&d.one("touchend",function(){k||(location.href=d.attr("href"))})),b.dataTransfer&&(b.dataTransfer.effectAllowed="move",b.dataTransfer.dropEffect="move",b.dataTransfer.setData("Text","*")),n=this,f&&f.remove();var e=a(n),h=e.offset();f=a('<div class="'+[l.options.draggingClass,l.options.dragCustomClass].join(" ")+'"></div>').css({top:h.top,left:h.left,width:e.width(),height:e.height(),marginLeft:e.css("margin-left"),paddingLeft:e.css("padding-left")}).data("mouse-offset",{left:h.left-parseInt(b.pageX,10),top:h.top-parseInt(b.pageY,10)}).append(e.html()).appendTo("body"),a(this).addClass(l.options.placeholderClass),j=l.element.children().addClass(l.options.childClass),c(),l.options.start(this,n),l.trigger("sortable-start",[l,n])}),q=b(function(a){return n?(a.preventDefault&&a.preventDefault(),!1):!0}),r=b(a.UIkit.Utils.debounce(function(){if(!n||n===this)return!0;var b=l.dragenterData(this);return l.dragenterData(this,b+1),0===b&&(a(this).addClass(l.options.overClass),l.options.warp||l.moveElementNextTo(n,this)),!1}),40),s=b(function(){var b=l.dragenterData(this);l.dragenterData(this,b-1),l.dragenterData(this)||(a(this).removeClass(l.options.overClass),l.dragenterData(this,!1))}),t=b(function(a){if("drop"===a.type&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()),this!==n){if(l.options.warp){var b=n.nextSibling;this.parentNode.insertBefore(n,this),this.parentNode.insertBefore(this,b)}l.options.change(this,n),l.trigger("sortable-change",[l,n])}}),u=function(){n=null,o=null,l.element.children().each(function(){1===this.nodeType&&(a(this).removeClass(l.options.overClass).removeClass(l.options.placeholderClass).removeClass(l.options.childClass),l.dragenterData(this,!1))}),i(),l.options.stop(this),l.trigger("sortable-stop",[l]),f.remove(),f=null},v=b(function(b){return k=!0,n&&n!==this&&o!==this?(j.removeClass(l.options.overClass),o=this,l.options.warp?a(this).addClass(l.options.overClass):l.moveElementNextTo(n,this),e(b)):!0});h?(m.addEventListener("dragstart",p,!1),m.addEventListener("dragenter",r,!1),m.addEventListener("dragleave",s,!1),m.addEventListener("drop",t,!1),m.addEventListener("dragover",q,!1),m.addEventListener("dragend",u,!1)):m.addEventListener(g?"touchstart":"mousedown",p,!1)},dragenterData:function(b,c){return b=a(b),1==arguments.length?parseInt(b.attr("data-child-dragenter"),10)||0:void(c?b.attr("data-child-dragenter",Math.max(0,c)):b.removeAttr("data-child-dragenter"))},moveElementNextTo:function(b,d){var e=this,f=a(b).parent().css("min-height",""),g=c(b,d)?d:d.nextSibling,h=f.children(),i=h.length;return e.options.warp||!e.options.animation?void d.parentNode.insertBefore(b,g):(f.css("min-height",f.height()),h.stop().each(function(){var b=a(this),c=b.position();c.width=b.width(),b.data("offset-before",c)}),d.parentNode.insertBefore(b,g),h=f.children().each(function(){var b=a(this);b.data("offset-after",b.position())}).each(function(){var b=a(this),c=b.data("offset-before");b.css({position:"absolute",top:c.top,left:c.left,"min-width":c.width})}),void h.each(function(){var b=a(this),c=(b.data("offset-before"),b.data("offset-after"));b.css("pointer-events","none").width(),setTimeout(function(){b.animate({top:c.top,left:c.left},e.options.animation,function(){b.css({position:"",top:"",left:"","min-width":"","pointer-events":""}).removeClass(e.options.overClass).attr("data-child-dragenter",""),i--,i||f.css("min-height","")})},0)}))}}),a(document).on("uk-domready",function(){a("[data-uk-sortable]").each(function(){var c=a(this);if(!c.data("sortable")){b.sortable(c,b.Utils.options(c.attr("data-uk-sortable")))}})}),a(document).on("dragover touchmove",function(a){if(f){var b=f.data("mouse-offset"),c=parseInt(a.originalEvent.pageX,10)+b.left,d=parseInt(a.originalEvent.pageY,10)+b.top;f.css({left:c,top:d})}}),b.sortable});