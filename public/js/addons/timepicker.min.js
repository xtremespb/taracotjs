/*! UIkit 2.7.1 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){var b;jQuery&&jQuery.UIkit&&(b=a(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-timepicker",["uikit"],function(){return b||a(jQuery,jQuery.UIkit)})}(function(a,b){return b.component("timepicker",{defaults:{defaultTime:"current",disableFocus:!1,minuteStep:15,secondStep:15,showSeconds:!1,showMeridian:!1},init:function(){this.domelement=this.element[0],this.on({"focus.timepicker.uikit":a.proxy(this.highlightUnit,this),"click.timepicker.uikit":a.proxy(this.highlightUnit,this),"keydown.timepicker.uikit":a.proxy(this.onKeydown,this),"blur.timepicker.uikit":a.proxy(this.blurElement,this)}),this.setDefaultTime(this.options.defaultTime)},setDefaultTime:function(a){if(this.domelement.value)this.updateFromElementVal();else if("current"===a){var b=new Date;this.hour=b.getHours(),this.minute=Math.floor(b.getMinutes()/this.options.minuteStep)*this.options.minuteStep,this.second=Math.floor(b.getSeconds()/this.options.secondStep)*this.options.secondStep,this.meridian="AM",this.options.showMeridian&&(0===this.hour?this.hour=12:this.hour>=12?(this.hour>12&&(this.hour=this.hour-12),this.meridian="PM"):this.meridian="AM"),this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b,c;this.options.showMeridian?(b=a.split(" "),c=b[0].split(":"),this.meridian=b[1]):c=a.split(":"),this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.options.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":("pm"===this.meridian||"p"===this.meridian)&&(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.options.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},decrementHour:function(a){if(this.options.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;a||this.update()},decrementMinute:function(a){var b=a?this.minute-a:this.minute-this.options.minuteStep;0>b?(this.decrementHour(!0),this.minute=b+60):this.minute=b,this.update()},decrementSecond:function(){var a=this.second-this.options.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a,this.update()},onKeydown:function(a){switch(a.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":a.preventDefault(),this.highlightNextUnit();break;case"minute":(this.options.showMeridian||this.options.showSeconds)&&(a.preventDefault(),this.highlightNextUnit());break;case"second":this.options.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,d){return a=10>a?"0"+a:a,b=10>b?"0"+b:b,c=10>c?"0"+c:c,a+":"+b+(this.options.showSeconds?":"+c:"")+(this.options.showMeridian?" "+d:"")},getCursorPosition:function(){if("selectionStart"in this.domelement)return this.domelement.selectionStart;if(document.selection){this.domelement.focus();var a=document.selection.createRange(),b=document.selection.createRange().text.length;return a.moveStart("character",-this.domelement.value.length),a.text.length-b}},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.options.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.options.showSeconds?this.highlightSecond():this.options.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.options.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.options.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.domelement;this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.domelement;this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.domelement;this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.domelement;this.highlightedUnit="meridian",a.setSelectionRange&&(this.options.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(a){if(this.options.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):(this.hour++,void(a||this.update()))},incrementMinute:function(a){var b=a?this.minute+a:this.minute+this.options.minuteStep-this.minute%this.options.minuteStep;b>59?(this.incrementHour(!0),this.minute=b-60):this.minute=b,this.update()},incrementSecond:function(){var a=this.second+this.options.secondStep-this.second%this.options.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a,this.update()},remove:function(){a("document").off(".timepicker.uikit"),delete this.element.data().timepicker},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement()},updateElement:function(){this.element.val(this.getTime()).trigger("change")},updateFromElementVal:function(){this.domelement.value&&this.setTime(this.domelement.value)}}),a(document).on("focus.timepicker.uikit","[data-uk-timepicker]",function(c){var d=a(this);if(!d.data("timepicker")){c.preventDefault();{b.timepicker(d,b.Utils.options(d.attr("data-uk-timepicker")))}d.trigger("focus")}}),b.timepicker});